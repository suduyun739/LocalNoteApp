# 📝 我的笔记本 - 本地笔记管理应用

一个纯静态的单页面笔记应用，支持读书笔记、观影笔记和日常笔记的管理。所有数据存储在浏览器本地，无需服务器。

## ✨ 功能特性

### 📚 三种笔记类型

- **读书笔记**：记录书名、作者、评分和读后感
- **观影笔记**：记录影片、导演、演员、评分和观后感
- **日常笔记**：自由记录日常想法和事件

### 🎯 核心功能

- ✅ **添加笔记** - 根据类型动态显示相关字段
- ✅ **查看详情** - 完整展示笔记内容
- ✅ **编辑笔记** - 修改现有笔记
- ✅ **删除笔记** - 带确认的安全删除
- ✅ **类型筛选** - 按笔记类型快速筛选
- ✅ **全文搜索** - 搜索标题、内容和标签
- ✅ **排序功能** - 按日期或标题排序
- ✅ **标签系统** - 为笔记添加多个标签
- ✅ **数据导出** - 导出为 JSON 文件备份
- ✅ **数据导入** - 从 JSON 文件恢复数据

### 💾 数据存储

- 使用 **IndexedDB** 本地数据库
- 容量大（通常 > 50MB）
- 数据持久化（不会丢失）
- 无需网络连接

## 🚀 快速开始

### 方法一：直接使用

1. 将整个 `LocalNoteApp` 文件夹下载到本地
2. 双击打开 `index.html` 文件
3. 开始使用！

### 方法二：本地服务器（推荐）

虽然不是必须的，但使用本地服务器可以获得更好的体验：

```bash
# 使用 Python 3
python -m http.server 8000

# 或使用 Node.js 的 http-server
npx http-server -p 8000

# 然后访问 http://localhost:8000
```

## 📁 项目结构

```
LocalNoteApp/
├── index.html      # 主页面（HTML 结构）
├── styles.css      # 样式文件（CSS）
├── db.js           # 数据库模块（IndexedDB 封装）
├── app.js          # 应用逻辑（JavaScript）
└── README.md       # 说明文档
```

## 🎨 界面预览

### 主界面
- 左侧：类型筛选和统计
- 右侧：笔记卡片列表
- 顶部：搜索栏和导出/导入按钮
- 底部：新建笔记按钮

### 笔记卡片
- 类型图标和徽章
- 标题和日期
- 内容预览
- 评分和标签

### 详情页
- 完整内容展示
- 编辑和删除按钮
- 类型特定字段

### 表单页
- 类型选择器
- 动态字段显示
- 表单验证

## 💡 使用说明

### 创建笔记

1. 点击左下角的 **"➕ 新建笔记"** 按钮
2. 选择笔记类型（读书/观影/日常）
3. 填写表单（标有 * 的为必填项）
4. 点击 **"💾 保存笔记"**

### 查看笔记

1. 在列表中点击任意笔记卡片
2. 查看完整内容
3. 可以点击 **"✏️ 编辑"** 或 **"🗑️ 删除"**

### 筛选笔记

- 点击左侧的类型按钮（全部/读书/观影/日常）
- 数字显示每种类型的笔记数量

### 搜索笔记

- 在顶部搜索框输入关键词
- 实时搜索标题、内容和标签
- 点击 **✖** 清除搜索

### 排序笔记

- 使用右上角的排序下拉菜单
- 支持：最新优先、最旧优先、标题 A-Z

### 导出数据

1. 点击顶部的 **"📥 导出"** 按钮
2. 自动下载 JSON 文件（命名：`notes-backup-日期.json`）
3. 保存到安全位置作为备份

### 导入数据

1. 点击顶部的 **"📤 导入"** 按钮
2. 选择之前导出的 JSON 文件
3. 确认导入（会替换现有数据）

## 🔧 技术栈

### 前端技术
- **HTML5** - 语义化标签
- **CSS3** - 现代样式（Grid, Flexbox, 变量）
- **JavaScript (ES6+)** - 原生 JS，无框架依赖

### 数据存储
- **IndexedDB** - 浏览器内置的 NoSQL 数据库
- 异步 API（Promise 封装）
- 支持索引和事务

### 设计模式
- **MVC 模式** - 分离数据、视图和逻辑
- **单页应用（SPA）** - 无刷新视图切换
- **响应式设计** - 适配各种屏幕尺寸

## 📊 数据结构

### 笔记对象示例

```javascript
{
  // 通用字段
  id: "1698384000123abc",           // 唯一标识
  type: "book",                      // 类型: book | movie | daily
  title: "《三体》读后感",           // 标题
  content: "震撼于宇宙尺度...",      // 内容
  date: "2023-10-27",                // 日期
  tags: ["科幻", "哲学", "必读"],    // 标签数组
  lastModified: 1698384000123,       // 最后修改时间戳

  // 读书笔记特定字段
  bookTitle: "三体",                 // 书名
  author: "刘慈欣",                  // 作者
  rating: 5,                         // 评分 (1-5)
  itemTitle: "三体",                 // 复用字段
  subtitle: "刘慈欣",                // 复用字段

  // 观影笔记特定字段
  movieTitle: "星际穿越",            // 影片名
  director: "克里斯托弗·诺兰",       // 导演
  actors: "马修·麦康纳, 安妮·海瑟薇", // 演员
  rating: 4.5,                       // 评分
  itemTitle: "星际穿越",             // 复用字段
  subtitle: "克里斯托弗·诺兰"        // 复用字段
}
```

## 🗂️ IndexedDB 设计

### 数据库配置
- **数据库名**: `NoteAppDB`
- **版本**: 1
- **对象存储**: `notes`
- **主键**: `id` (字符串)

### 索引
- `type` - 按类型快速查询
- `date` - 按日期排序
- `lastModified` - 按修改时间排序

### 优势
- **容量大**: 通常 > 50MB（localStorage 只有 5-10MB）
- **性能好**: 异步操作不阻塞 UI
- **功能强**: 支持索引、事务、游标

## 🌐 浏览器兼容性

### 完全支持
- ✅ Chrome 24+
- ✅ Firefox 16+
- ✅ Safari 10+
- ✅ Edge 12+

### 最低要求
- 支持 IndexedDB API
- 支持 ES6+ 语法（Promise, async/await, 箭头函数等）
- 支持 CSS Grid 和 Flexbox

### 测试建议
建议使用以下浏览器的最新版本：
- Google Chrome（推荐）
- Mozilla Firefox
- Microsoft Edge

## ⚙️ 配置说明

### 修改颜色主题

编辑 `styles.css` 中的 CSS 变量：

```css
:root {
    --primary-color: #2563eb;      /* 主色调 */
    --success-color: #10b981;      /* 成功色 */
    --danger-color: #ef4444;       /* 危险色 */
    /* ... 更多颜色 */
}
```

### 修改数据库配置

编辑 `db.js` 中的常量：

```javascript
const DB_NAME = 'NoteAppDB';       // 数据库名
const DB_VERSION = 1;               // 版本号
const STORE_NAME = 'notes';         // 对象存储名
```

### 添加新的笔记类型

1. 在 `app.js` 的 `NOTE_TYPES` 中添加配置
2. 在 `index.html` 表单中添加对应字段
3. 在 `showTypeSpecificFields()` 中添加逻辑

## 🔒 数据安全

### 数据存储位置

IndexedDB 数据存储在浏览器本地：

- **Windows**: `C:\Users\<用户>\AppData\Local\<浏览器>\User Data\Default\IndexedDB`
- **macOS**: `~/Library/Application Support/<浏览器>/Default/IndexedDB`
- **Linux**: `~/.config/<浏览器>/Default/IndexedDB`

### 数据持久性

✅ **数据会保留**：
- 正常使用和关闭浏览器
- 系统重启
- 浏览器更新

❌ **数据会丢失**：
- 清除浏览器数据
- 卸载浏览器（部分情况）
- 手动删除数据库文件

### 备份建议

⚠️ **强烈建议定期导出数据！**

1. 使用应用的导出功能
2. 保存 JSON 文件到安全位置
3. 使用云存储（如 OneDrive, Google Drive）同步备份文件

### 隐私保护

✅ 完全本地运行，无网络请求
✅ 数据不会上传到任何服务器
✅ 不使用 Cookies 或跟踪技术

## 🐛 常见问题

### Q: 数据会丢失吗？
A: 正常使用不会丢失。但建议定期导出备份，以防：
- 误操作清除浏览器数据
- 浏览器崩溃或升级问题
- 切换设备时需要迁移数据

### Q: 可以在手机上使用吗？
A: 可以！界面是响应式的，支持手机浏览器。但移动端的 IndexedDB 支持可能不如桌面端稳定。

### Q: 如何在多台设备间同步？
A: 应用本身不支持云同步。建议：
1. 在旧设备导出数据
2. 将 JSON 文件传输到新设备（邮件、云盘等）
3. 在新设备导入数据

### Q: 如何清空所有数据？
A: 两种方法：
1. 在浏览器设置中清除网站数据
2. 导入一个空的 JSON 文件（`[]`）

### Q: 搜索不到中文？
A: 搜索功能支持中文，确保使用的是现代浏览器。如有问题，检查浏览器控制台是否有错误。

### Q: 能导出为 PDF 吗？
A: 可以使用浏览器的打印功能（Ctrl+P），选择"另存为 PDF"。

## 🚧 已知限制

1. **存储容量**：虽然 IndexedDB 容量大，但仍有限制（通常 50MB-1GB），具体取决于浏览器和系统。
2. **图片支持**：目前不支持上传图片。可以考虑在笔记中粘贴图片链接。
3. **富文本编辑**：内容输入为纯文本，不支持格式化（加粗、斜体等）。
4. **协同编辑**：纯本地应用，不支持多人协作。
5. **版本历史**：不记录笔记的历史版本。

## 🛠️ 扩展建议

如果你想学习并扩展这个应用，可以尝试：

### 初级扩展
- [ ] 添加更多笔记类型（如旅行笔记、美食笔记）
- [ ] 改进搜索（高亮关键词、模糊搜索）
- [ ] 添加笔记收藏功能
- [ ] 支持笔记归档

### 中级扩展
- [ ] 实现标签管理（独立的标签表）
- [ ] 添加统计功能（图表展示）
- [ ] 支持 Markdown 语法
- [ ] 实现笔记导出为 PDF

### 高级扩展
- [ ] 集成云存储（Google Drive API）
- [ ] 添加全文索引搜索（lunr.js）
- [ ] 支持图片上传和管理
- [ ] 实现笔记加密功能
- [ ] 开发 PWA（Progressive Web App）支持离线使用

## 📚 学习资源

### IndexedDB
- [MDN: IndexedDB API](https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API)
- [IndexedDB 完整指南](https://javascript.info/indexeddb)

### JavaScript
- [现代 JavaScript 教程](https://zh.javascript.info/)
- [ES6 入门教程](https://es6.ruanyifeng.com/)

### CSS
- [CSS Grid 布局](https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Grid_Layout)
- [Flexbox 布局](https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Flexible_Box_Layout)

## 📝 更新日志

### Version 1.0.0 (2025-01-19)
- ✅ 初始版本发布
- ✅ 支持三种笔记类型
- ✅ 完整的 CRUD 功能
- ✅ 数据导出/导入
- ✅ 响应式设计

## 📄 许可证

本项目采用 MIT 许可证。你可以自由使用、修改和分发代码。

## 🤝 贡献

这是一个学习项目，欢迎提出改进建议！

## 📧 联系方式

如有问题或建议，欢迎反馈！

---

**Happy Note-Taking! 📝✨**
